# 3.5 Code Quality Tools Configuration í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ê°œìš”

**ëª©í‘œ**: ì½”ë“œ í’ˆì§ˆ ë„êµ¬ ì„¤ì •ì˜ ëª¨ë“  ê¸°ëŠ¥ì´ WSL + Docker í™˜ê²½ì—ì„œ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ ê²€ì¦
**í…ŒìŠ¤íŠ¸ ë²”ìœ„**: Black, isort, flake8, mypy, pre-commit, ìë™í™” ìŠ¤í¬ë¦½íŠ¸
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 45-60ë¶„
**ì‹¤ì „ ê²€ì¦ ì™„ë£Œ**: âœ… 2024ë…„ 12ì›” WSL Ubuntu + Docker í™˜ê²½ì—ì„œ ê²€ì¦ë¨

---

## ğŸš€ ì›í´ë¦­ ìë™ ì„¤ì • ë° í…ŒìŠ¤íŠ¸

### ğŸ¯ ì „ì²´ ìë™í™” ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash

# =================================================================
# 3.5 Code Quality Tools ì™„ì „ ìë™í™” ì„¤ì • ë° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
# WSL Ubuntu + Docker í™˜ê²½ ì™„ì „ ì§€ì›
# ì‹¤ì „ ê²€ì¦ ì™„ë£Œ: 2024ë…„ 12ì›”
# =================================================================

set -e

echo "ğŸš€ 3.5 Code Quality Tools ìë™ ì„¤ì • ë° í…ŒìŠ¤íŠ¸ ì‹œì‘..."
echo "ğŸ“ í˜„ì¬ ìœ„ì¹˜: $(pwd)"
echo "ğŸ•’ ì‹œì‘ ì‹œê°„: $(date)"
echo "=================================================="

# ìƒ‰ìƒ ì •ì˜
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# ë¡œê·¸ í•¨ìˆ˜
log_info() { echo -e "${BLUE}â„¹ï¸  $1${NC}"; }
log_success() { echo -e "${GREEN}âœ… $1${NC}"; }
log_warning() { echo -e "${YELLOW}âš ï¸  $1${NC}"; }
log_error() { echo -e "${RED}âŒ $1${NC}"; }

# ê²°ê³¼ ì¶”ì 
RESULTS_DIR="results/3.5-code-quality-tools"
TIMESTAMP=$(date '+%Y%m%d_%H%M%S')
TEST_LOG="$RESULTS_DIR/test_log_$TIMESTAMP.txt"
TEST_REPORT="$RESULTS_DIR/test_report_$TIMESTAMP.json"
GENERATED_FILES_LIST="$RESULTS_DIR/generated_files_$TIMESTAMP.txt"

# ì„±ëŠ¥ ì¶”ì 
declare -A PERFORMANCE_METRICS
declare -A TEST_RESULTS

# ê²°ê³¼ ë””ë ‰í„°ë¦¬ ìƒì„±
mkdir -p "$RESULTS_DIR"

# ë¡œê·¸ ì‹œì‘
{
    echo "=================================================="
    echo "3.5 Code Quality Tools í…ŒìŠ¤íŠ¸ ë¡œê·¸"
    echo "ì‹œì‘ ì‹œê°„: $(date)"
    echo "WSL í™˜ê²½: $(uname -a)"
    echo "íŒŒì´ì¬ ë²„ì „: $(python3 --version)"
    echo "=================================================="
} > "$TEST_LOG"

# ë©”ì¸ í•¨ìˆ˜ë“¤
setup_environment() {
    log_info "í™˜ê²½ ì„¤ì • ì¤‘..."
    
    # ê¸°ë³¸ ë””ë ‰í„°ë¦¬ ì„¤ì •
    cd /mnt/c/dev/movie-mlops
    
    # Python ê°€ìƒí™˜ê²½ í™•ì¸
    if [ ! -d "venv" ]; then
        log_info "Python ê°€ìƒí™˜ê²½ ìƒì„± ì¤‘..."
        python3 -m venv venv
    fi
    
    # ê°€ìƒí™˜ê²½ í™œì„±í™”
    source venv/bin/activate
    
    # ê¸°ë³¸ íŒ¨í‚¤ì§€ ì—…ê·¸ë ˆì´ë“œ
    pip install --upgrade pip wheel setuptools
    
    # ê°œë°œ ì˜ì¡´ì„± ì„¤ì¹˜
    log_info "ê°œë°œ ì˜ì¡´ì„± ì„¤ì¹˜ ì¤‘..."
    pip install black isort flake8 mypy bandit pylint safety pre-commit
    pip install pytest pytest-cov pytest-mock
    pip install pandas numpy matplotlib seaborn
    
    log_success "í™˜ê²½ ì„¤ì • ì™„ë£Œ"
}

create_configuration_files() {
    log_info "ì„¤ì • íŒŒì¼ ìƒì„± ì¤‘..."
    
    # pyproject.toml ìƒì„±
    cat > pyproject.toml << 'EOF'
[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "movie-mlops"
version = "0.1.0"
description = "Movie MLOps Pipeline with Code Quality Tools"
authors = [{name = "Movie MLOps Team", email = "team@movie-mlops.com"}]
license = {text = "MIT"}
readme = "README.md"
requires-python = ">=3.8"
dependencies = [
    "pandas>=1.3.0",
    "numpy>=1.21.0",
    "scikit-learn>=1.0.0",
    "matplotlib>=3.5.0",
    "seaborn>=0.11.0",
]

[project.optional-dependencies]
dev = [
    "black>=22.0.0",
    "isort>=5.10.0",
    "flake8>=4.0.0",
    "mypy>=0.950",
    "bandit>=1.7.0",
    "pylint>=2.13.0",
    "safety>=2.0.0",
    "pre-commit>=2.17.0",
    "pytest>=7.0.0",
    "pytest-cov>=3.0.0",
    "pytest-mock>=3.7.0",
]

[tool.black]
line-length = 88
target-version = ['py38', 'py39', 'py310', 'py311']
include = '\.pyi?$'
extend-exclude = '''
/(
  # directories
  \.eggs
  | \.git
  | \.hg
  | \.mypy_cache
  | \.tox
  | \.venv
  | venv
  | _build
  | buck-out
  | build
  | dist
  | __pycache__
)/
'''

[tool.isort]
profile = "black"
multi_line_output = 3
line_length = 88
include_trailing_comma = true
force_grid_wrap = 0
use_parentheses = true
ensure_newline_before_comments = true
src_paths = ["src", "tests"]
skip_glob = ["**/migrations/*", "**/venv/*", "**/.venv/*"]
known_first_party = ["movie_mlops"]
known_third_party = ["pandas", "numpy", "sklearn", "matplotlib", "seaborn", "pytest"]

[tool.mypy]
python_version = "3.8"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
strict_equality = true
show_error_codes = true

[[tool.mypy.overrides]]
module = [
    "pandas.*",
    "numpy.*",
    "sklearn.*",
    "matplotlib.*",
    "seaborn.*",
]
ignore_missing_imports = true

[tool.pylint.messages_control]
disable = "C0330, C0326"

[tool.pylint.format]
max-line-length = "88"

[tool.bandit]
exclude_dirs = ["tests", "venv", ".venv"]
skips = ["B101", "B601"]

[tool.coverage.run]
source = ["src"]
omit = [
    "*/tests/*",
    "*/venv/*",
    "*/.venv/*",
    "*/migrations/*",
]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "if self.debug:",
    "if settings.DEBUG",
    "raise AssertionError",
    "raise NotImplementedError",
    "if 0:",
    "if __name__ == .__main__.:",
    "class .*\bProtocol\):",
    "@(abc\.)?abstractmethod",
]
EOF

    # .flake8 ì„¤ì •
    cat > .flake8 << 'EOF'
[flake8]
max-line-length = 88
select = E,W,F
ignore = 
    E203,  # whitespace before ':'
    E501,  # line too long (let black handle this)
    W503,  # line break before binary operator
    E231,  # missing whitespace after ','
per-file-ignores =
    __init__.py:F401
    tests/*:S101
exclude = 
    .git,
    __pycache__,
    .venv,
    venv,
    .eggs,
    *.egg,
    build,
    dist,
    .mypy_cache,
    .pytest_cache,
    migrations
max-complexity = 10
EOF

    # .pre-commit-config.yaml ìƒì„±
    cat > .pre-commit-config.yaml << 'EOF'
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
      - id: check-merge-conflict
      - id: debug-statements
      - id: check-docstring-first

  - repo: https://github.com/psf/black
    rev: 22.12.0
    hooks:
      - id: black
        language_version: python3
        args: [--line-length=88]

  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: [--profile=black]

  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8
        additional_dependencies: [flake8-docstrings]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v0.991
    hooks:
      - id: mypy
        additional_dependencies: [types-all]
        args: [--ignore-missing-imports]

  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.4
    hooks:
      - id: bandit
        args: [-r]
        exclude: tests/

  - repo: https://github.com/pylint-dev/pylint
    rev: v2.15.10
    hooks:
      - id: pylint
        args: [--rcfile=.pylintrc]

ci:
    autofix_commit_msg: |
        [pre-commit.ci] auto fixes from pre-commit.com hooks

        for more information, see https://pre-commit.ci
    autofix_prs: true
    autoupdate_branch: ''
    autoupdate_commit_msg: '[pre-commit.ci] pre-commit autoupdate'
    autoupdate_schedule: weekly
    skip: []
    submodules: false
EOF

    # .pylintrc ìƒì„±
    cat > .pylintrc << 'EOF'
[MASTER]
jobs=1
suggestion-mode=yes
unsafe-load-any-extension=no

[MESSAGES CONTROL]
confidence=
disable=raw-checker-failed,
        bad-inline-option,
        locally-disabled,
        file-ignored,
        suppressed-message,
        useless-suppression,
        deprecated-pragma,
        use-symbolic-message-instead,
        C0114,  # missing-module-docstring
        C0115,  # missing-class-docstring
        C0116,  # missing-function-docstring
        R0903,  # too-few-public-methods

[REPORTS]
output-format=text
reports=no
score=yes

[REFACTORING]
max-nested-blocks=5
never-returning-functions=sys.exit

[SIMILARITIES]
ignore-comments=yes
ignore-docstrings=yes
ignore-imports=no
min-similarity-lines=4

[SPELLING]
max-spelling-suggestions=4
spelling-store-unknown-words=no

[STRING]
check-str-concat-over-line-jumps=no

[TYPECHECK]
contextmanager-decorators=contextlib.contextmanager
ignore-mixin-members=yes
ignore-none=yes
ignore-on-opaque-inference=yes
ignored-classes=optparse.Values,thread._local,_thread._local
ignored-modules=
missing-member-hint=yes
missing-member-hint-distance=1
missing-member-max-choices=1

[VARIABLES]
allow-global-unused-variables=yes
callbacks=cb_,
          _cb
dummy-variables-rgx=_+$|(_[a-zA-Z0-9_]*[a-zA-Z0-9]+?$)|dummy|^ignored_|^unused_
ignored-argument-names=_.*|^ignored_|^unused_
init-import=no
redefining-builtins-modules=six.moves,past.builtins,future.builtins,builtins,io

[CLASSES]
defining-attr-methods=__init__,
                      __new__,
                      setUp,
                      __post_init__
exclude-protected=_asdict,
                  _fields,
                  _replace,
                  _source,
                  _make
valid-classmethod-first-arg=cls
valid-metaclass-classmethod-first-arg=cls

[DESIGN]
max-args=5
max-attributes=7
max-bool-expr=5
max-branches=12
max-locals=15
max-parents=7
max-public-methods=20
max-returns=6
max-statements=50
min-public-methods=2

[EXCEPTIONS]
overgeneral-exceptions=BaseException,
                       Exception

[FORMAT]
expected-line-ending-format=
ignore-long-lines=^\s*(# )?<?https?://\S+>?$
indent-after-paren=4
indent-string='    '
max-line-length=88
max-module-lines=1000
single-line-class-stmt=no
single-line-if-stmt=no

[IMPORTS]
allow-wildcard-with-all=no
analyse-fallback-blocks=no
deprecated-modules=optparse,tkinter.tix
ext-import-graph=
import-graph=
int-import-graph=
known-standard-library=
known-third-party=enchant
preferred-modules=
EOF

    # VSCode ì„¤ì •
    mkdir -p .vscode
    cat > .vscode/settings.json << 'EOF'
{
    "python.defaultInterpreterPath": "./venv/bin/python",
    "python.terminal.activateEnvironment": true,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "python.sortImports.args": ["--profile=black"],
    "python.linting.enabled": true,
    "python.linting.flake8Enabled": true,
    "python.linting.mypyEnabled": true,
    "python.linting.banditEnabled": true,
    "python.linting.pylintEnabled": true,
    "python.linting.lintOnSave": true,
    "editor.formatOnSave": true,
    "editor.formatOnPaste": false,
    "editor.codeActionsOnSave": {
        "source.organizeImports": true
    },
    "files.exclude": {
        "**/__pycache__": true,
        "**/.pytest_cache": true,
        "**/.mypy_cache": true,
        "**/venv": true,
        "**/.venv": true
    },
    "[python]": {
        "editor.tabSize": 4,
        "editor.insertSpaces": true,
        "editor.rulers": [88],
        "editor.wordWrap": "off"
    }
}
EOF

    cat > .vscode/extensions.json << 'EOF'
{
    "recommendations": [
        "ms-python.python",
        "ms-python.black-formatter",
        "ms-python.flake8",
        "ms-python.mypy-type-checker",
        "ms-python.pylint",
        "ms-python.isort",
        "tamasfe.even-better-toml",
        "redhat.vscode-yaml",
        "ms-vscode.vscode-json"
    ]
}
EOF

    # ìƒì„±ëœ íŒŒì¼ ëª©ë¡ ì €ì¥
    {
        echo "pyproject.toml"
        echo ".flake8"
        echo ".pre-commit-config.yaml"
        echo ".pylintrc"
        echo ".vscode/settings.json"
        echo ".vscode/extensions.json"
    } >> "$GENERATED_FILES_LIST"

    log_success "ì„¤ì • íŒŒì¼ ìƒì„± ì™„ë£Œ"
}

create_test_files() {
    log_info "í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ì¤‘..."
    
    mkdir -p test_quality/{src,tests,scripts}
    
    # ë¬¸ì œê°€ ìˆëŠ” Python íŒŒì¼ë“¤ ìƒì„±
    cat > test_quality/src/bad_format.py << 'EOF'
import   sys,os
import pandas as pd
from typing import List,Dict

def   poorly_formatted_function(  param1,param2  ):
    """This function has poor formatting"""
    x=1+2
    y=3*4
    if x==3:
        result=param1+param2
        return result
    else:return None

class BadlyFormattedClass:
    def __init__(self,value):
        self.value=value
    def get_value(self  ):
        return self.value

# Unused import and variables
import datetime
unused_var = "not used"
EOF

    cat > test_quality/src/import_mess.py << 'EOF'
import sys
import os
from collections import defaultdict
import pandas as pd
from typing import Dict
import numpy as np
from pathlib import Path
import json
from datetime import datetime
import re
from typing import List, Optional
import matplotlib.pyplot as plt
from sklearn.model_selection import train_test_split
import tensorflow as tf

def sample_function():
    return "imports are messy"
EOF

    cat > test_quality/src/type_issues.py << 'EOF'
def function_without_types(param1, param2):
    return param1 + param2

def function_with_any(param1) -> any:
    return param1

class ClassWithoutTypes:
    def method(self, param):
        return param * 2

def function_with_missing_return():
    x = 1 + 2
    # Missing return statement
EOF

    cat > test_quality/src/security_issues.py << 'EOF'
import subprocess
import os

# Security issue: shell injection
def run_command(user_input):
    os.system(f"ls {user_input}")
    
# Security issue: hardcoded password
password = "hardcoded_password_123"

# Security issue: eval usage
def evaluate_expression(expr):
    return eval(expr)
EOF

    cat > test_quality/src/complex_issues.py << 'EOF'
import   os,sys
from typing import List,Dict
import pandas as pd

class   ComplexIssuesClass:
    def __init__(self,data,config={}):
        self.data=data
        self.config=config
    
    def process(self,items):
        result=[]
        for item in items:
            if item.get('status')=='active':
                processed={'id':item['id'],'value':item['value']*2,'timestamp':datetime.now()}
                result.append(processed)
        return result
    
    def analyze_data(self,dataset,filters={}):
        filtered_data=[row for row in dataset if all(row.get(k)==v for k,v in filters.items())]
        return{'count':len(filtered_data),'average':sum(row['value']for row in filtered_data)/len(filtered_data)if filtered_data else 0}
EOF

    # í…ŒìŠ¤íŠ¸ íŒŒì¼
    cat > test_quality/tests/test_example.py << 'EOF'
import pytest
from src.bad_format import poorly_formatted_function

def test_poorly_formatted_function():
    result = poorly_formatted_function(1, 2)
    assert result == 3

def test_with_no_assertion():
    # Test without assertion
    poorly_formatted_function(5, 10)
EOF

    # ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë“¤
    cat > test_quality/scripts/quality_check.py << 'EOF'
#!/usr/bin/env python3
"""ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸"""

import subprocess
import sys
from pathlib import Path
from typing import Dict, List, Tuple


def run_command(cmd: List[str], description: str) -> Tuple[bool, str]:
    """ëª…ë ¹ì–´ ì‹¤í–‰ ë° ê²°ê³¼ ë°˜í™˜"""
    try:
        result = subprocess.run(
            cmd, capture_output=True, text=True, check=False
        )
        success = result.returncode == 0
        output = result.stdout + result.stderr
        return success, output
    except Exception as e:
        return False, str(e)


def check_code_quality(src_path: str = "src") -> Dict[str, bool]:
    """ì½”ë“œ í’ˆì§ˆ ë„êµ¬ë“¤ ì‹¤í–‰"""
    results = {}
    
    tools = [
        (["black", "--check", src_path], "Black í¬ë§· ê²€ì‚¬"),
        (["isort", "--check-only", src_path], "Import ì •ë ¬ ê²€ì‚¬"),
        (["flake8", src_path], "Flake8 ìŠ¤íƒ€ì¼ ê²€ì‚¬"),
        (["mypy", src_path], "MyPy íƒ€ì… ê²€ì‚¬"),
        (["bandit", "-r", src_path], "Bandit ë³´ì•ˆ ê²€ì‚¬"),
    ]
    
    for cmd, description in tools:
        print(f"ğŸ” {description}...")
        success, output = run_command(cmd, description)
        results[description] = success
        
        if not success:
            print(f"âŒ {description} ì‹¤íŒ¨:")
            print(output[:500])  # ì²˜ìŒ 500ìë§Œ ì¶œë ¥
        else:
            print(f"âœ… {description} í†µê³¼")
    
    return results


if __name__ == "__main__":
    src_path = sys.argv[1] if len(sys.argv) > 1 else "src"
    results = check_code_quality(src_path)
    
    passed = sum(results.values())
    total = len(results)
    
    print(f"\nğŸ“Š ê²°ê³¼: {passed}/{total} í†µê³¼")
    
    if passed == total:
        print("ğŸ‰ ëª¨ë“  í’ˆì§ˆ ê²€ì‚¬ í†µê³¼!")
        sys.exit(0)
    else:
        print("âŒ ì¼ë¶€ í’ˆì§ˆ ê²€ì‚¬ ì‹¤íŒ¨")
        sys.exit(1)
EOF

    cat > test_quality/scripts/quality_fix.py << 'EOF'
#!/usr/bin/env python3
"""ì½”ë“œ í’ˆì§ˆ ìë™ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸"""

import subprocess
import sys
from pathlib import Path
from typing import List, Tuple


def run_command(cmd: List[str], description: str) -> Tuple[bool, str]:
    """ëª…ë ¹ì–´ ì‹¤í–‰ ë° ê²°ê³¼ ë°˜í™˜"""
    try:
        result = subprocess.run(
            cmd, capture_output=True, text=True, check=False
        )
        success = result.returncode == 0
        output = result.stdout + result.stderr
        return success, output
    except Exception as e:
        return False, str(e)


def fix_code_quality(src_path: str = "src") -> None:
    """ì½”ë“œ í’ˆì§ˆ ìë™ ìˆ˜ì •"""
    
    tools = [
        (["isort", src_path], "Import ì •ë ¬ ìˆ˜ì •"),
        (["black", src_path], "Black í¬ë§· ìˆ˜ì •"),
    ]
    
    for cmd, description in tools:
        print(f"ğŸ”§ {description}...")
        success, output = run_command(cmd, description)
        
        if success:
            print(f"âœ… {description} ì™„ë£Œ")
        else:
            print(f"âŒ {description} ì‹¤íŒ¨:")
            print(output)


if __name__ == "__main__":
    src_path = sys.argv[1] if len(sys.argv) > 1 else "src"
    fix_code_quality(src_path)
    print("ğŸ‰ ì½”ë“œ í’ˆì§ˆ ìë™ ìˆ˜ì • ì™„ë£Œ!")
EOF

    chmod +x test_quality/scripts/*.py

    # ìƒì„±ëœ í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª©ë¡ ì €ì¥
    {
        echo "test_quality/src/bad_format.py"
        echo "test_quality/src/import_mess.py"
        echo "test_quality/src/type_issues.py"
        echo "test_quality/src/security_issues.py"
        echo "test_quality/src/complex_issues.py"
        echo "test_quality/tests/test_example.py"
        echo "test_quality/scripts/quality_check.py"
        echo "test_quality/scripts/quality_fix.py"
    } >> "$GENERATED_FILES_LIST"

    log_success "í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ì™„ë£Œ"
}

test_individual_tools() {
    log_info "ê°œë³„ ë„êµ¬ í…ŒìŠ¤íŠ¸ ì¤‘..."
    
    local start_time end_time duration
    
    # Black í…ŒìŠ¤íŠ¸
    start_time=$(date +%s)
    log_info "Black í¬ë§·í„° í…ŒìŠ¤íŠ¸..."
    
    black --check test_quality/ 2>/dev/null || {
        log_info "í¬ë§·íŒ… í•„ìš”í•œ íŒŒì¼ ê°ì§€ë¨"
        black test_quality/
        if black --check test_quality/ 2>/dev/null; then
            TEST_RESULTS["black"]="passed"
            log_success "Black í…ŒìŠ¤íŠ¸ í†µê³¼"
        else
            TEST_RESULTS["black"]="failed"
            log_error "Black í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨"
        fi
    }
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["black"]="${duration}s"
    
    # isort í…ŒìŠ¤íŠ¸
    start_time=$(date +%s)
    log_info "isort í…ŒìŠ¤íŠ¸..."
    
    isort --check-only test_quality/ 2>/dev/null || {
        log_info "import ì •ë ¬ í•„ìš”í•¨"
        isort test_quality/
        if isort --check-only test_quality/ 2>/dev/null; then
            TEST_RESULTS["isort"]="passed"
            log_success "isort í…ŒìŠ¤íŠ¸ í†µê³¼"
        else
            TEST_RESULTS["isort"]="failed"
            log_error "isort í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨"
        fi
    }
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["isort"]="${duration}s"
    
    # flake8 í…ŒìŠ¤íŠ¸
    start_time=$(date +%s)
    log_info "flake8 í…ŒìŠ¤íŠ¸..."
    
    if flake8 test_quality/ 2>/dev/null; then
        TEST_RESULTS["flake8"]="passed"
        log_success "flake8 í…ŒìŠ¤íŠ¸ í†µê³¼"
    else
        TEST_RESULTS["flake8"]="partial"
        log_warning "flake8ì—ì„œ ì¼ë¶€ ì´ìŠˆ ê°ì§€ë¨ (ì •ìƒ)"
    fi
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["flake8"]="${duration}s"
    
    # mypy í…ŒìŠ¤íŠ¸
    start_time=$(date +%s)
    log_info "mypy í…ŒìŠ¤íŠ¸..."
    
    if mypy test_quality/src/ 2>/dev/null; then
        TEST_RESULTS["mypy"]="passed"
        log_success "mypy í…ŒìŠ¤íŠ¸ í†µê³¼"
    else
        TEST_RESULTS["mypy"]="partial"
        log_warning "mypyì—ì„œ íƒ€ì… ì´ìŠˆ ê°ì§€ë¨ (ì •ìƒ)"
    fi
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["mypy"]="${duration}s"
    
    # bandit í…ŒìŠ¤íŠ¸
    start_time=$(date +%s)
    log_info "bandit ë³´ì•ˆ í…ŒìŠ¤íŠ¸..."
    
    if bandit -r test_quality/src/ 2>/dev/null; then
        TEST_RESULTS["bandit"]="passed"
        log_success "bandit í…ŒìŠ¤íŠ¸ í†µê³¼"
    else
        TEST_RESULTS["bandit"]="partial"
        log_warning "banditì—ì„œ ë³´ì•ˆ ì´ìŠˆ ê°ì§€ë¨ (ì •ìƒ)"
    fi
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["bandit"]="${duration}s"
}

test_precommit_integration() {
    log_info "Pre-commit Hook í†µí•© í…ŒìŠ¤íŠ¸..."
    
    local start_time end_time duration
    start_time=$(date +%s)
    
    # Pre-commit ì„¤ì¹˜
    if pre-commit install 2>/dev/null; then
        log_success "Pre-commit hook ì„¤ì¹˜ ì™„ë£Œ"
        
        # ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ ì‹¤í–‰
        if pre-commit run --all-files 2>/dev/null; then
            TEST_RESULTS["precommit"]="passed"
            log_success "Pre-commit í…ŒìŠ¤íŠ¸ í†µê³¼"
        else
            TEST_RESULTS["precommit"]="partial"
            log_warning "Pre-commitì—ì„œ ì¼ë¶€ ì´ìŠˆ ìˆ˜ì •í•¨ (ì •ìƒ)"
        fi
    else
        TEST_RESULTS["precommit"]="failed"
        log_error "Pre-commit ì„¤ì¹˜ ì‹¤íŒ¨"
    fi
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["precommit"]="${duration}s"
}

test_docker_integration() {
    log_info "Docker í†µí•© í…ŒìŠ¤íŠ¸..."
    
    if ! command -v docker >/dev/null 2>&1; then
        log_warning "Dockerê°€ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ, í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ"
        TEST_RESULTS["docker"]="skipped"
        return
    fi
    
    local start_time end_time duration
    start_time=$(date +%s)
    
    # ê°„ë‹¨í•œ Dockerfile ìƒì„±
    cat > Dockerfile.quality-test << 'EOF'
FROM python:3.9-slim

WORKDIR /app

COPY requirements-dev.txt .
RUN pip install -r requirements-dev.txt

COPY . .

CMD ["python", "-m", "pytest"]
EOF

    # requirements-dev.txt ìƒì„±
    cat > requirements-dev.txt << 'EOF'
black>=22.0.0
isort>=5.10.0
flake8>=4.0.0
mypy>=0.950
bandit>=1.7.0
pre-commit>=2.17.0
pytest>=7.0.0
EOF

    # Docker ì´ë¯¸ì§€ ë¹Œë“œ í…ŒìŠ¤íŠ¸
    if docker build -f Dockerfile.quality-test -t quality-test . >/dev/null 2>&1; then
        log_success "Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„±ê³µ"
        
        # ì»¨í…Œì´ë„ˆì—ì„œ í’ˆì§ˆ ë„êµ¬ ì‹¤í–‰
        if docker run --rm -v "$(pwd)/test_quality:/app/test_quality" quality-test \
           bash -c "black --check test_quality/ && isort --check test_quality/" >/dev/null 2>&1; then
            TEST_RESULTS["docker"]="passed"
            log_success "Docker í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼"
        else
            TEST_RESULTS["docker"]="partial"
            log_warning "Dockerì—ì„œ ì¼ë¶€ í’ˆì§ˆ ì´ìŠˆ ê°ì§€ë¨"
        fi
        
        # ì •ë¦¬
        docker rmi quality-test >/dev/null 2>&1
    else
        TEST_RESULTS["docker"]="failed"
        log_error "Docker ì´ë¯¸ì§€ ë¹Œë“œ ì‹¤íŒ¨"
    fi
    
    # ìƒì„±ëœ íŒŒì¼ ì •ë¦¬
    rm -f Dockerfile.quality-test requirements-dev.txt
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["docker"]="${duration}s"
}

test_script_automation() {
    log_info "ìŠ¤í¬ë¦½íŠ¸ ìë™í™” í…ŒìŠ¤íŠ¸..."
    
    local start_time end_time duration
    start_time=$(date +%s)
    
    # í’ˆì§ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸
    if python test_quality/scripts/quality_check.py test_quality/src >/dev/null 2>&1; then
        TEST_RESULTS["quality_check_script"]="passed"
        log_success "í’ˆì§ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ í†µê³¼"
    else
        TEST_RESULTS["quality_check_script"]="partial"
        log_warning "í’ˆì§ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì´ìŠˆ ê°ì§€ë¨ (ì •ìƒ)"
    fi
    
    # í’ˆì§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸
    if python test_quality/scripts/quality_fix.py test_quality/src >/dev/null 2>&1; then
        TEST_RESULTS["quality_fix_script"]="passed"
        log_success "í’ˆì§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ í†µê³¼"
    else
        TEST_RESULTS["quality_fix_script"]="failed"
        log_error "í’ˆì§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨"
    fi
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["script_automation"]="${duration}s"
}

test_performance() {
    log_info "ì„±ëŠ¥ í…ŒìŠ¤íŠ¸..."
    
    local start_time end_time duration
    start_time=$(date +%s)
    
    # ëŒ€ìš©ëŸ‰ íŒŒì¼ ìƒì„±
    mkdir -p test_quality/performance
    
    for i in {1..50}; do
        cat > "test_quality/performance/large_file_$i.py" << EOF
"""Performance test file $i"""
import sys
import os
from typing import Dict, List, Optional
import pandas as pd
import numpy as np

class PerformanceTestClass$i:
    def __init__(self, value: int) -> None:
        self.value = value
    
    def process_data(self, data: List[Dict]) -> Optional[Dict]:
        result = {}
        for item in data:
            result[f"key_{item.get('id', 0)}"] = item.get('value', 0) * self.value
        return result if result else None

def performance_function_$i(param: str) -> str:
    return f"processed_{param}_{$i}"
EOF
    done
    
    # ì„±ëŠ¥ ì¸¡ì •
    perf_start=$(date +%s.%N)
    black test_quality/performance/ >/dev/null 2>&1
    black_perf=$(date +%s.%N)
    
    isort test_quality/performance/ >/dev/null 2>&1
    isort_perf=$(date +%s.%N)
    
    flake8 test_quality/performance/ >/dev/null 2>&1
    flake8_perf=$(date +%s.%N)
    
    # ì„±ëŠ¥ ê³„ì‚° (bc ì‚¬ìš©)
    black_time=$(echo "$black_perf - $perf_start" | bc 2>/dev/null || echo "1.0")
    isort_time=$(echo "$isort_perf - $black_perf" | bc 2>/dev/null || echo "1.0")
    flake8_time=$(echo "$flake8_perf - $isort_perf" | bc 2>/dev/null || echo "1.0")
    
    PERFORMANCE_METRICS["black_large"]="${black_time}s"
    PERFORMANCE_METRICS["isort_large"]="${isort_time}s"
    PERFORMANCE_METRICS["flake8_large"]="${flake8_time}s"
    
    # ì •ë¦¬
    rm -rf test_quality/performance/
    
    end_time=$(date +%s)
    duration=$((end_time - start_time))
    PERFORMANCE_METRICS["performance_test"]="${duration}s"
    
    TEST_RESULTS["performance"]="passed"
    log_success "ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ"
}

generate_test_report() {
    log_info "í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ìƒì„± ì¤‘..."
    
    # JSON ë¦¬í¬íŠ¸ ìƒì„±
    cat > "$TEST_REPORT" << EOF
{
    "test_name": "3.5 Code Quality Tools Configuration",
    "timestamp": "$(date -Iseconds)",
    "environment": {
        "os": "$(uname -s)",
        "os_version": "$(uname -r)",
        "python_version": "$(python3 --version)",
        "working_directory": "$(pwd)"
    },
    "test_results": {
EOF

    # í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¶”ê°€
    local first=true
    for test in "${!TEST_RESULTS[@]}"; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "        \"$test\": \"${TEST_RESULTS[$test]}\"" >> "$TEST_REPORT"
    done

    cat >> "$TEST_REPORT" << EOF
    },
    "performance_metrics": {
EOF

    # ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ê°€
    first=true
    for metric in "${!PERFORMANCE_METRICS[@]}"; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "        \"$metric\": \"${PERFORMANCE_METRICS[$metric]}\"" >> "$TEST_REPORT"
    done

    cat >> "$TEST_REPORT" << EOF
    },
    "generated_files": [
EOF

    # ìƒì„±ëœ íŒŒì¼ ëª©ë¡ ì¶”ê°€
    first=true
    while IFS= read -r file; do
        if [ "$first" = true ]; then
            first=false
        else
            echo "," >> "$TEST_REPORT"
        fi
        echo "        \"$file\"" >> "$TEST_REPORT"
    done < "$GENERATED_FILES_LIST"

    cat >> "$TEST_REPORT" << EOF
    ],
    "summary": {
        "total_tests": $(echo "${!TEST_RESULTS[@]}" | wc -w),
        "passed_tests": $(printf '%s\n' "${TEST_RESULTS[@]}" | grep -c "passed"),
        "failed_tests": $(printf '%s\n' "${TEST_RESULTS[@]}" | grep -c "failed"),
        "partial_tests": $(printf '%s\n' "${TEST_RESULTS[@]}" | grep -c "partial"),
        "skipped_tests": $(printf '%s\n' "${TEST_RESULTS[@]}" | grep -c "skipped")
    }
}
EOF

    log_success "í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ: $TEST_REPORT"
}

cleanup_test_environment() {
    log_info "í…ŒìŠ¤íŠ¸ í™˜ê²½ ì •ë¦¬ ì¤‘..."
    
    # í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ ì •ë¦¬
    rm -rf test_quality/
    
    # Git ì„¤ì • ì •ë¦¬ (pre-commit hook)
    pre-commit uninstall >/dev/null 2>&1 || true
    
    log_success "í…ŒìŠ¤íŠ¸ í™˜ê²½ ì •ë¦¬ ì™„ë£Œ"
}

print_final_report() {
    log_info "ìµœì¢… í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¶œë ¥..."
    
    echo ""
    echo "=================================================="
    echo "ğŸ¯ 3.5 Code Quality Tools í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½"
    echo "=================================================="
    
    # í…ŒìŠ¤íŠ¸ ê²°ê³¼ í†µê³„
    local total=0 passed=0 failed=0 partial=0 skipped=0
    
    for result in "${TEST_RESULTS[@]}"; do
        ((total++))
        case "$result" in
            "passed") ((passed++)) ;;
            "failed") ((failed++)) ;;
            "partial") ((partial++)) ;;
            "skipped") ((skipped++)) ;;
        esac
    done
    
    echo "ğŸ“Š í…ŒìŠ¤íŠ¸ í†µê³„:"
    echo "  - ì´ í…ŒìŠ¤íŠ¸: $total"
    echo "  - í†µê³¼: $passed"
    echo "  - ì‹¤íŒ¨: $failed"  
    echo "  - ë¶€ë¶„ ì„±ê³µ: $partial"
    echo "  - ìŠ¤í‚µ: $skipped"
    
    # ì„±ê³µë¥  ê³„ì‚°
    local success_rate=0
    if [ $total -gt 0 ]; then
        success_rate=$(( (passed * 100) / total ))
    fi
    echo "  - ì„±ê³µë¥ : ${success_rate}%"
    
    echo ""
    echo "ğŸ”§ ê°œë³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼:"
    for test in "${!TEST_RESULTS[@]}"; do
        local result="${TEST_RESULTS[$test]}"
        local icon
        case "$result" in
            "passed") icon="âœ…" ;;
            "failed") icon="âŒ" ;;
            "partial") icon="âš ï¸" ;;
            "skipped") icon="â­ï¸" ;;
            *) icon="â“" ;;
        esac
        
        local perf=""
        if [[ -n "${PERFORMANCE_METRICS[$test]:-}" ]]; then
            perf=" (${PERFORMANCE_METRICS[$test]})"
        fi
        
        echo "  $icon $test: $result$perf"
    done
    
    echo ""
    echo "ğŸ“ˆ ì„±ëŠ¥ ë©”íŠ¸ë¦­:"
    for metric in "${!PERFORMANCE_METRICS[@]}"; do
        if [[ ! "${!TEST_RESULTS[@]}" =~ $metric ]]; then
            echo "  â±ï¸ $metric: ${PERFORMANCE_METRICS[$metric]}"
        fi
    done
    
    echo ""
    echo "ğŸ“ ìƒì„±ëœ íŒŒì¼:"
    while IFS= read -r file; do
        if [ -f "$file" ] || [ -d "$file" ]; then
            echo "  âœ… $file"
        else
            echo "  âŒ $file (ëˆ„ë½)"
        fi
    done < "$GENERATED_FILES_LIST"
    
    echo ""
    echo "ğŸ“„ ìƒì„¸ ë¦¬í¬íŠ¸: $TEST_REPORT"
    echo "ğŸ“ í…ŒìŠ¤íŠ¸ ë¡œê·¸: $TEST_LOG"
    
    # ê¶Œì¥ì‚¬í•­
    echo ""
    echo "ğŸ’¡ ê¶Œì¥ì‚¬í•­:"
    
    if [ $success_rate -ge 90 ]; then
        echo "  ğŸ‰ í›Œë¥­í•©ë‹ˆë‹¤! Code Quality Toolsê°€ ì™„ë²½í•˜ê²Œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
        echo "  ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„:"
        echo "    - íŒ€ì›ë“¤ê³¼ ì„¤ì • ê³µìœ "
        echo "    - CI/CD íŒŒì´í”„ë¼ì¸ì— í†µí•©"
        echo "    - ì •ê¸°ì ì¸ í’ˆì§ˆ ê²€ì‚¬ ìŠ¤ì¼€ì¤„ ì„¤ì •"
    elif [ $success_rate -ge 70 ]; then
        echo "  ğŸ‘ ì¢‹ìŠµë‹ˆë‹¤! ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤."
        echo "  ğŸ”§ ê°œì„ ì‚¬í•­:"
        for test in "${!TEST_RESULTS[@]}"; do
            if [[ "${TEST_RESULTS[$test]}" == "failed" ]]; then
                echo "    - $test ì¬ì ê²€ í•„ìš”"
            fi
        done
    else
        echo "  ğŸ”§ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤."
        echo "  ğŸš¨ ìš°ì„  í•´ê²°ì‚¬í•­:"
        echo "    - ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë“¤ ì¬ì‹¤í–‰"
        echo "    - í™˜ê²½ ì„¤ì • ì¬ê²€í† "
        echo "    - ì˜ì¡´ì„± ì„¤ì¹˜ í™•ì¸"
    fi
    
    echo ""
    echo "ğŸ•’ ì™„ë£Œ ì‹œê°„: $(date)"
    echo "=================================================="
    
    # ì „ì²´ ì„±ê³µ ì—¬ë¶€ ë°˜í™˜
    [ $failed -eq 0 ]
}

# ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜
main() {
    {
        echo "í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œì‘: $(date)"
        echo "Python ë²„ì „: $(python3 --version)"
        echo "ì‘ì—… ë””ë ‰í„°ë¦¬: $(pwd)"
    } >> "$TEST_LOG"
    
    # ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    setup_environment
    create_configuration_files
    create_test_files
    test_individual_tools
    test_precommit_integration
    test_docker_integration
    test_script_automation
    test_performance
    generate_test_report
    cleanup_test_environment
    
    # ìµœì¢… ê²°ê³¼ ì¶œë ¥
    print_final_report
    
    {
        echo "í…ŒìŠ¤íŠ¸ ì™„ë£Œ: $(date)"
        echo "ìµœì¢… ê²°ê³¼: $([ $? -eq 0 ] && echo "ì„±ê³µ" || echo "ì‹¤íŒ¨")"
    } >> "$TEST_LOG"
}

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
main "$@"
```

ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ `setup_and_test_3.5.sh`ë¡œ ì €ì¥í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”:

```bash
chmod +x setup_and_test_3.5.sh
./setup_and_test_3.5.sh
```

---

## ğŸ§ª ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì™¸ì—ë„ ìˆ˜ë™ìœ¼ë¡œ ê° ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ¯ ê¸°ë³¸ í™˜ê²½ ê²€ì¦

```bash
# WSL Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰
cd /mnt/c/dev/movie-mlops

# í˜„ì¬ ìƒíƒœ í™•ì¸
pwd
git status

# Python í™˜ê²½ í™•ì¸
python3 --version
which python3

# ê°€ìƒí™˜ê²½ í™œì„±í™”
source venv/bin/activate

# í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸
pip list | grep -E "(black|isort|flake8|mypy|bandit|pre-commit)"
```

### ğŸ¨ Black í¬ë§·í„° í…ŒìŠ¤íŠ¸

```bash
# í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒíƒœ í™•ì¸
echo "ğŸ“ í¬ë§·íŒ… ì „ ìƒíƒœ:"
black --check test_quality/ || echo "í¬ë§·íŒ… í•„ìš”í•œ íŒŒì¼ ìˆìŒ"

# í¬ë§·íŒ… ì ìš©
echo "ğŸ¨ Black í¬ë§·íŒ… ì ìš©:"
black test_quality/

# ê²°ê³¼ í™•ì¸
echo "âœ… í¬ë§·íŒ… í›„ ìƒíƒœ:"
black --check test_quality/ && echo "ëª¨ë“  íŒŒì¼ í¬ë§·íŒ… ì™„ë£Œ"
```

### ğŸ“¦ isort í…ŒìŠ¤íŠ¸

```bash
# import ì •ë ¬ í™•ì¸
echo "ğŸ“¦ import ì •ë ¬ ì „:"
isort --check-only test_quality/ || echo "ì •ë ¬ í•„ìš”í•œ íŒŒì¼ ìˆìŒ"

# ì •ë ¬ ì ìš©
echo "ğŸ”„ import ì •ë ¬ ì ìš©:"
isort test_quality/

# ê²°ê³¼ í™•ì¸
echo "âœ… import ì •ë ¬ í›„:"
isort --check-only test_quality/ && echo "ëª¨ë“  import ì •ë ¬ ì™„ë£Œ"
```

### ğŸ” flake8 ìŠ¤íƒ€ì¼ ê²€ì‚¬

```bash
# ìŠ¤íƒ€ì¼ ê²€ì‚¬ ì‹¤í–‰
echo "ğŸ” flake8 ìŠ¤íƒ€ì¼ ê²€ì‚¬:"
flake8 test_quality/ || echo "ìŠ¤íƒ€ì¼ ì´ìŠˆ ìˆìŒ (ì •ìƒ)"

# í†µê³„ ë³´ê¸°
echo "ğŸ“Š flake8 í†µê³„:"
flake8 --statistics test_quality/
```

### ğŸ”¬ MyPy íƒ€ì… ê²€ì‚¬

```bash
# íƒ€ì… ê²€ì‚¬ ì‹¤í–‰
echo "ğŸ”¬ MyPy íƒ€ì… ê²€ì‚¬:"
mypy test_quality/src/ || echo "íƒ€ì… ì´ìŠˆ ìˆìŒ (ì •ìƒ)"

# ì„¤ì • íŒŒì¼ ê¸°ë°˜ ê²€ì‚¬
echo "âš™ï¸ ì„¤ì • ê¸°ë°˜ íƒ€ì… ê²€ì‚¬:"
mypy --config-file pyproject.toml test_quality/src/ || echo "íƒ€ì… ê²€ì‚¬ ì™„ë£Œ"
```

### ğŸ”’ Bandit ë³´ì•ˆ ê²€ì‚¬

```bash
# ë³´ì•ˆ ê²€ì‚¬ ì‹¤í–‰
echo "ğŸ”’ Bandit ë³´ì•ˆ ê²€ì‚¬:"
bandit -r test_quality/src/ || echo "ë³´ì•ˆ ì´ìŠˆ ìˆìŒ (ì •ìƒ)"

# JSON ë¦¬í¬íŠ¸ ìƒì„±
echo "ğŸ“„ ë³´ì•ˆ ë¦¬í¬íŠ¸ ìƒì„±:"
bandit -r test_quality/src/ -f json -o security_report.json || true
```

### ğŸ”— Pre-commit Hook í…ŒìŠ¤íŠ¸

```bash
# Pre-commit ì„¤ì¹˜
echo "ğŸ”— Pre-commit Hook ì„¤ì¹˜:"
pre-commit install

# ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ ì‹¤í–‰
echo "ğŸ§ª Pre-commit í…ŒìŠ¤íŠ¸:"
pre-commit run --all-files || echo "ì¼ë¶€ ìˆ˜ì • ì ìš©ë¨"

# íŠ¹ì • hookë§Œ ì‹¤í–‰
echo "ğŸ¯ ê°œë³„ Hook í…ŒìŠ¤íŠ¸:"
pre-commit run black
pre-commit run isort
pre-commit run flake8
```

---

## ğŸ³ Docker í†µí•© í…ŒìŠ¤íŠ¸

```bash
# Docker í™˜ê²½ì—ì„œ í’ˆì§ˆ ë„êµ¬ í…ŒìŠ¤íŠ¸
echo "ğŸ³ Docker í†µí•© í…ŒìŠ¤íŠ¸..."

# ê°„ë‹¨í•œ Dockerfile ìƒì„±
cat > Dockerfile.quality << 'EOF'
FROM python:3.9-slim

WORKDIR /app

RUN pip install black isort flake8 mypy bandit

COPY test_quality/ ./test_quality/

CMD ["bash"]
EOF

# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -f Dockerfile.quality -t code-quality-test .

# ì»¨í…Œì´ë„ˆì—ì„œ í’ˆì§ˆ ë„êµ¬ ì‹¤í–‰
docker run --rm code-quality-test bash -c "
    echo 'ğŸ” Dockerì—ì„œ í’ˆì§ˆ ê²€ì‚¬'
    black --check test_quality/
    isort --check test_quality/
    flake8 test_quality/
    echo 'âœ… Docker í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ'
"

# ì •ë¦¬
docker rmi code-quality-test
rm Dockerfile.quality
```

---

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

### ê¸°ì¤€ ì„±ëŠ¥ ì§€í‘œ

| ë„êµ¬ | ì‘ì€ í”„ë¡œì íŠ¸ (< 10 íŒŒì¼) | ì¤‘ê°„ í”„ë¡œì íŠ¸ (< 100 íŒŒì¼) | ëŒ€í˜• í”„ë¡œì íŠ¸ (< 1000 íŒŒì¼) |
|------|-------------------------|---------------------------|----------------------------|
| Black | < 2ì´ˆ | < 10ì´ˆ | < 30ì´ˆ |
| isort | < 1ì´ˆ | < 5ì´ˆ | < 15ì´ˆ |
| flake8 | < 3ì´ˆ | < 15ì´ˆ | < 45ì´ˆ |
| mypy | < 5ì´ˆ | < 30ì´ˆ | < 120ì´ˆ |
| bandit | < 2ì´ˆ | < 10ì´ˆ | < 30ì´ˆ |

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
echo "â±ï¸ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸..."

# ëŒ€ìš©ëŸ‰ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
mkdir -p perf_test
for i in {1..100}; do
    cat > "perf_test/module_$i.py" << EOF
"""Performance test module $i"""
import sys
import os
from typing import Dict, List, Optional

class TestClass$i:
    def method(self, data: List[Dict]) -> Optional[str]:
        return f"result_{data[0] if data else 'empty'}"
EOF
done

# ì„±ëŠ¥ ì¸¡ì •
echo "ğŸ“ ì„±ëŠ¥ ì¸¡ì • ì‹œì‘..."

time black perf_test/
time isort perf_test/
time flake8 perf_test/
time mypy perf_test/
time bandit -r perf_test/

# ì •ë¦¬
rm -rf perf_test/
```

---

## ğŸ”§ ì•Œë ¤ì§„ ë¬¸ì œ ë° í•´ê²°ì±…

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

**ë¬¸ì œ 1: íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì˜¤ë¥˜**
```bash
# í•´ê²°ì±…: ê°€ìƒí™˜ê²½ ì¬ìƒì„±
rm -rf venv/
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install black isort flake8 mypy bandit pre-commit
```

**ë¬¸ì œ 2: Pre-commit ì„¤ì¹˜ ì‹¤íŒ¨**
```bash
# í•´ê²°ì±…: Pre-commit ì¬ì„¤ì¹˜
pip uninstall pre-commit
pip install pre-commit
pre-commit clean
pre-commit install --install-hooks
```

**ë¬¸ì œ 3: MyPy import ì˜¤ë¥˜**
```bash
# í•´ê²°ì±…: íƒ€ì… ìŠ¤í… ì„¤ì¹˜
pip install types-requests types-PyYAML types-setuptools
# ë˜ëŠ” mypy ì„¤ì •ì—ì„œ ignore_missing_imports = true
```

**ë¬¸ì œ 4: Blackê³¼ isort ì¶©ëŒ**
```bash
# í•´ê²°ì±…: isort í”„ë¡œí•„ ì„¤ì •
# pyproject.tomlì— profile = "black" ì¶”ê°€
isort --profile black .
```

**ë¬¸ì œ 5: flake8 ë¼ì¸ ê¸¸ì´ ì˜¤ë¥˜**
```bash
# í•´ê²°ì±…: .flake8ì—ì„œ E501 ë¬´ì‹œ
# ignore = E501,W503
# max-line-length = 88
```

**ë¬¸ì œ 6: Docker ê¶Œí•œ ë¬¸ì œ**
```bash
# í•´ê²°ì±…: Docker ê·¸ë£¹ ì¶”ê°€
sudo usermod -aG docker $USER
# ë˜ëŠ” sudoë¡œ ì‹¤í–‰
sudo docker run ...
```

**ë¬¸ì œ 7: WSL ê²½ë¡œ ë¬¸ì œ**
```bash
# í•´ê²°ì±…: ì˜¬ë°”ë¥¸ WSL ê²½ë¡œ ì‚¬ìš©
cd /mnt/c/dev/movie-mlops  # Windows ê²½ë¡œ
# ë˜ëŠ”
cd ~/projects/movie-mlops  # WSL ë„¤ì´í‹°ë¸Œ ê²½ë¡œ
```

### í™˜ê²½ë³„ íŠ¹ì´ì‚¬í•­

**WSL Ubuntu í™˜ê²½:**
- Windowsì™€ Linux ê²½ë¡œ í˜¼ìš© ì£¼ì˜
- ê¶Œí•œ ì„¤ì • í™•ì¸
- Docker Desktop ì—°ë™ í™•ì¸

**Docker í™˜ê²½:**
- ë³¼ë¥¨ ë§ˆìš´íŠ¸ ê²½ë¡œ í™•ì¸
- ë„¤íŠ¸ì›Œí¬ ì„¤ì • í™•ì¸
- ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”

---

## ğŸ“‹ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… í•„ìˆ˜ ê²€ì¦ í•­ëª©

- [ ] **í™˜ê²½ ì„¤ì •**
  - [ ] Python 3.8+ ì„¤ì¹˜ë¨
  - [ ] ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
  - [ ] ëª¨ë“  í’ˆì§ˆ ë„êµ¬ ì„¤ì¹˜ë¨

- [ ] **ì„¤ì • íŒŒì¼**
  - [ ] pyproject.toml ìƒì„±ë¨
  - [ ] .flake8 ìƒì„±ë¨
  - [ ] .pre-commit-config.yaml ìƒì„±ë¨
  - [ ] .pylintrc ìƒì„±ë¨

- [ ] **ê°œë³„ ë„êµ¬ í…ŒìŠ¤íŠ¸**
  - [ ] Black í¬ë§·í„° ì •ìƒ ì‘ë™
  - [ ] isort import ì •ë ¬ ì •ìƒ ì‘ë™
  - [ ] flake8 ìŠ¤íƒ€ì¼ ê²€ì‚¬ ì •ìƒ ì‘ë™
  - [ ] MyPy íƒ€ì… ê²€ì‚¬ ì •ìƒ ì‘ë™
  - [ ] Bandit ë³´ì•ˆ ê²€ì‚¬ ì •ìƒ ì‘ë™

- [ ] **í†µí•© í…ŒìŠ¤íŠ¸**
  - [ ] Pre-commit Hook ì •ìƒ ì‘ë™
  - [ ] VSCode í†µí•© ì„¤ì • ì™„ë£Œ
  - [ ] Docker í™˜ê²½ í…ŒìŠ¤íŠ¸ í†µê³¼

- [ ] **ìë™í™”**
  - [ ] í’ˆì§ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ë™
  - [ ] í’ˆì§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ ì‘ë™
  - [ ] CI/CD íŒŒì´í”„ë¼ì¸ ì¤€ë¹„

### ğŸ¯ ì„±ëŠ¥ ê²€ì¦

- [ ] **ì†ë„ ê¸°ì¤€**
  - [ ] Black: ì†Œê·œëª¨ í”„ë¡œì íŠ¸ < 2ì´ˆ
  - [ ] isort: ì†Œê·œëª¨ í”„ë¡œì íŠ¸ < 1ì´ˆ
  - [ ] flake8: ì†Œê·œëª¨ í”„ë¡œì íŠ¸ < 3ì´ˆ
  - [ ] ì „ì²´ íŒŒì´í”„ë¼ì¸ < 30ì´ˆ

- [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**
  - [ ] ì •ìƒ ë²”ìœ„ ë‚´ ë©”ëª¨ë¦¬ ì‚¬ìš©
  - [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ

### ğŸ”„ ì‹¤ì œ ì›Œí¬í”Œë¡œìš° ê²€ì¦

- [ ] **ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤**
  - [ ] ìƒˆ íŒŒì¼ ìƒì„± ì‹œ ìë™ í¬ë§·íŒ…
  - [ ] Git ì»¤ë°‹ ì‹œ Pre-commit ì‹¤í–‰
  - [ ] í’ˆì§ˆ ì´ìŠˆ ìë™ ìˆ˜ì •

- [ ] **í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤**
  - [ ] íŒ€ì› ê°„ ì¼ê´€ëœ ì½”ë“œ ìŠ¤íƒ€ì¼
  - [ ] ì„¤ì • íŒŒì¼ ê³µìœ  ê°€ëŠ¥
  - [ ] CI/CD í†µí•© ì¤€ë¹„

---

## ğŸ‰ ì„±ê³µ ê¸°ì¤€

### ğŸ† ì™„ì „ ì„±ê³µ (100%)
- ëª¨ë“  í’ˆì§ˆ ë„êµ¬ ì •ìƒ ì„¤ì¹˜ ë° ì‘ë™
- ì„¤ì • íŒŒì¼ ëª¨ë‘ ìƒì„±ë˜ê³  ì ìš©ë¨
- Pre-commit Hook ì •ìƒ ì‘ë™
- Docker í†µí•© ì„±ê³µ
- ì„±ëŠ¥ ê¸°ì¤€ ëª¨ë‘ ë§Œì¡±

### ğŸ‘ ë¶€ë¶„ ì„±ê³µ (80%+)
- í•µì‹¬ ë„êµ¬ë“¤(Black, isort, flake8) ì •ìƒ ì‘ë™
- ê¸°ë³¸ ì„¤ì • íŒŒì¼ ìƒì„±ë¨
- ìˆ˜ë™ ì‹¤í–‰ ì‹œ ì •ìƒ ì‘ë™
- ì¼ë¶€ í†µí•© í…ŒìŠ¤íŠ¸ ì„±ê³µ

### ğŸ”§ ê°œì„  í•„ìš” (60%+)
- ê¸°ë³¸ ë„êµ¬ ì„¤ì¹˜ë¨
- ì¼ë¶€ ê¸°ëŠ¥ ì‘ë™í•¨
- ì¶”ê°€ ì„¤ì • ë° íŠœë‹ í•„ìš”

### âŒ ì‹¤íŒ¨ (60% ë¯¸ë§Œ)
- ê¸°ë³¸ ë„êµ¬ ì„¤ì¹˜ ì‹¤íŒ¨
- ì„¤ì • íŒŒì¼ ë¬¸ì œ
- í™˜ê²½ êµ¬ì„± ë¬¸ì œ

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•œ ê²½ìš°:

1. **ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰**: `./setup_and_test_3.5.sh`
2. **ë¡œê·¸ í™•ì¸**: `results/3.5-code-quality-tools/test_log_*.txt`
3. **ë¦¬í¬íŠ¸ ê²€í† **: `results/3.5-code-quality-tools/test_report_*.json`
4. **ìˆ˜ë™ í…ŒìŠ¤íŠ¸**: ìœ„ì˜ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ ì°¸ì¡°

---

ì´ ê°€ì´ë“œë¥¼ í†µí•´ 3.5 Code Quality Tools Configurationì´ ì™„ë²½í•˜ê²Œ ì„¤ì •ë˜ê³  í…ŒìŠ¤íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰